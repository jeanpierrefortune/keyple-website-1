<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="5557.5px" preserveAspectRatio="none" style="width:4212px;height:5557px;" version="1.1" viewBox="0 0 4212 5557" width="4212.5px" zoomAndPan="magnify"><defs><filter height="1" id="b1ipj8p30t8zck0" width="1" x="0" y="0"><feFlood flood-color="#ADD8E6" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="442.5" x="1874.375" y="71.7139">Keyple Remote Plugin</text><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="760" x="1715.625" y="128.3154">RemoteServerPlugin API (16/06/2020)</text><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="562.5" x="1814.375" y="184.917">(with an ObservableReader)</text><rect fill="#FEF9E7" height="5317.3828" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 2.5;" width="2042.5" x="315" y="214.8047"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="1118.75" y="248.5425">Client APP using Native Lib</text><rect fill="#FDF2E9" height="5317.3828" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 2.5;" width="1710" x="2362.5" y="214.8047"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="452.5" x="2991.25" y="248.5425">Server APP using Virtual Lib</text><rect fill="#FFFFE0" height="3291.6797" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="101.25" y="1964.9609"/><rect fill="#ADD8E6" height="303.5156" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="496.25" y="1964.9609"/><rect fill="#ADD8E6" height="116.5234" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="842.5" y="1293.1641"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="842.5" y="1704.8242"/><rect fill="#FFC0CB" height="4335.1367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="1420" y="921.5039"/><rect fill="#ADD8E6" height="2357.7539" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2142.5" y="2876.3867"/><rect fill="#ADD8E6" height="182.4023" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="2911.3867"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="3169.668"/><rect fill="#ADD8E6" height="110.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="5047.3828"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="3321.4258"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="3841.6992"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4034.3359"/><rect fill="#ADD8E6" height="35" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4186.0938"/><rect fill="#ADD8E6" height="227.6367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4617.9883"/><rect fill="#FFC0CB" height="4720.4102" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3741.25" y="536.2305"/><rect fill="#FDF2E9" height="498.6523" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 5.0;" width="4055" x="32.5" y="4366.9727"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="112.5" x2="112.5" y1="511.2305" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="507.5" x2="507.5" y1="1366.4258" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="855" x2="855" y1="1254.7852" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="1432.5" x2="1432.5" y1="511.2305" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="2155" x2="2155" y1="1143.1445" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="2572.5" x2="2572.5" y1="750.9277" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="3107.5" x2="3107.5" y1="3009.6484" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="3752.5" x2="3752.5" y1="511.2305" y2="5279.1406"/><rect fill="#FEFECE" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="112.5" x="57.5" y="429.707"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="77.5" x="75" y="483.54">Card</text><rect fill="#FEFECE" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="112.5" x="57.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="77.5" x="75" y="5330.4736">Card</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="367.5" x="325" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="332.5" x="342.5" y="5330.4736">ObservableReader</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="145" x="782.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="800" y="5330.4736">Plugin</text><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="305" x="1272.5" y="503.54">Ticketing Service</text><ellipse cx="1432.5" cy="334.707" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M1432.5,354.707 L1432.5,422.207 M1400,374.707 L1465,374.707 M1432.5,422.207 L1400,459.707 M1432.5,422.207 L1465,459.707 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="305" x="1272.5" y="5312.9736">Ticketing Service</text><ellipse cx="1432.5" cy="5345.6641" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M1432.5,5365.6641 L1432.5,5433.1641 M1400,5385.6641 L1465,5385.6641 M1432.5,5433.1641 L1400,5470.6641 M1432.5,5433.1641 L1465,5470.6641 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="385" x="1962.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="350" x="1980" y="5330.4736">NativeClientService</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="400" x="2372.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="365" x="2390" y="5330.4736">RemoteServerPlugin</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="622.5" x="2797.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="587.5" x="2815" y="5330.4736">RemoteServerObservableReader</text><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="450" x="3516.25" y="459.5166">Remote Ticketing Service</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="10" x="3966.25" y="459.5166">:</text><text fill="#000000" filter="url(#b1ipj8p30t8zck0)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="602.5" x="3445" y="503.54">ObservablePlugin.PluginObserver</text><ellipse cx="3753.75" cy="290.6836" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M3753.75,310.6836 L3753.75,378.1836 M3721.25,330.6836 L3786.25,330.6836 M3753.75,378.1836 L3721.25,415.6836 M3753.75,378.1836 L3786.25,415.6836 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="450" x="3516.25" y="5312.9736">Remote Ticketing Service</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="10" x="3966.25" y="5312.9736">:</text><text fill="#000000" filter="url(#b1ipj8p30t8zck0)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="602.5" x="3445" y="5356.9971">ObservablePlugin.PluginObserver</text><ellipse cx="3753.75" cy="5389.6875" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M3753.75,5409.6875 L3753.75,5477.1875 M3721.25,5429.6875 L3786.25,5429.6875 M3753.75,5477.1875 L3721.25,5514.6875 M3753.75,5477.1875 L3786.25,5514.6875 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><rect fill="#FFFFE0" height="3291.6797" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="101.25" y="1964.9609"/><rect fill="#ADD8E6" height="303.5156" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="496.25" y="1964.9609"/><rect fill="#ADD8E6" height="116.5234" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="842.5" y="1293.1641"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="842.5" y="1704.8242"/><rect fill="#FFC0CB" height="4335.1367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="1420" y="921.5039"/><rect fill="#ADD8E6" height="2357.7539" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2142.5" y="2876.3867"/><rect fill="#ADD8E6" height="182.4023" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="2911.3867"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="3169.668"/><rect fill="#ADD8E6" height="110.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2560" y="5047.3828"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="3321.4258"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="3841.6992"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4034.3359"/><rect fill="#ADD8E6" height="35" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4186.0938"/><rect fill="#ADD8E6" height="227.6367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3096.25" y="4617.9883"/><rect fill="#FFC0CB" height="4720.4102" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3741.25" y="536.2305"/><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4176.25" x="7.5" y="589.1699"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="589.1699" y2="589.1699"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="596.6699" y2="596.6699"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="417.5" x="1886.875" y="561.2305"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="372.5" x="1901.875" y="604.9683">Virtual Lib Initialization</text><polygon fill="#A80036" points="2800,774.7461,2775,784.7461,2800,794.7461,2790,784.7461" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2785" x2="3738.75" y1="784.7461" y2="784.7461"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="432.5" x="2815" y="690.8472">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="442.5" x="2825" y="731.7261">(RemoteServerPluginFactory...</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="407.5" x="2855" y="772.605">.withPluginObserver (this)...)</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="400" x="2372.5" y="698.2227"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="365" x="2390" y="752.0557">RemoteServerPlugin</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3883.75" y1="889.0039" y2="889.0039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3883.75" x2="3883.75" y1="889.0039" y2="921.5039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3781.25" x2="3883.75" y1="921.5039" y2="921.5039"/><polygon fill="#A80036" points="3806.25,911.5039,3781.25,921.5039,3806.25,931.5039,3796.25,921.5039" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="265" x="3796.25" y="835.9839">Awaiting receipt of</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="237.5" x="3806.25" y="876.8628">a Plugin Event...</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4176.25" x="7.5" y="1006.9434"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="1006.9434" y2="1006.9434"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="1014.4434" y2="1014.4434"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="412.5" x="1889.375" y="979.0039"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="367.5" x="1904.375" y="1022.7417">Native Lib Initialization</text><polygon fill="#A80036" points="1932.5,1110.7617,1957.5,1120.7617,1932.5,1130.7617,1942.5,1120.7617" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="1947.5" y1="1120.7617" y2="1120.7617"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="415" x="1462.5" y="1108.6206">NativeClientServiceFactory...</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="385" x="1962.5" y="1064.8828"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="350" x="1980" y="1118.7158">NativeClientService</text><polygon fill="#A80036" points="955,1258.1641,930,1268.1641,955,1278.1641,945,1268.1641" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="940" x2="1417.5" y1="1268.1641" y2="1268.1641"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="432.5" x="970" y="1215.144">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="270" x="980" y="1256.0229">(new XXXFactory())</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="145" x="782.5" y="1181.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="800" y="1235.4736">Plugin</text><polygon fill="#A80036" points="720,1334.043,695,1344.043,720,1354.043,710,1344.043" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="705" x2="840" y1="1344.043" y2="1344.043"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="735" y="1331.9019">create</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="367.5" x="325" y="1288.1641"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="332.5" x="342.5" y="1341.9971">ObservableReader</text><polygon fill="#A80036" points="1390,1399.6875,1415,1409.6875,1390,1419.6875,1400,1409.6875" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="855" x2="1405" y1="1409.6875" y2="1409.6875"/><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4176.25" x="7.5" y="1482.627"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="1482.627" y2="1482.627"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="1490.127" y2="1490.127"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="347.5" x="1921.875" y="1454.6875"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="302.5" x="1936.875" y="1498.4253">Native SeSelection</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="1550" y1="1596.4453" y2="1596.4453"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1550" x2="1550" y1="1596.4453" y2="1628.9453"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1447.5" x2="1550" y1="1628.9453" y2="1628.9453"/><polygon fill="#A80036" points="1472.5,1618.9453,1447.5,1628.9453,1472.5,1638.9453,1462.5,1628.9453" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="325" x="1462.5" y="1584.3042">Start Ticketing Service</text><polygon fill="#A80036" points="895,1694.8242,870,1704.8242,895,1714.8242,885,1704.8242" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="880" x2="1417.5" y1="1704.8242" y2="1704.8242"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="257.5" x="910" y="1692.6831">getReader (name)</text><polygon fill="#A80036" points="1390,1770.7031,1415,1780.7031,1390,1790.7031,1400,1780.7031" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="855" x2="1405" y1="1780.7031" y2="1780.7031"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="872.5" y="1768.562">reader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="1550" y1="1856.582" y2="1856.582"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1550" x2="1550" y1="1856.582" y2="1889.082"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1447.5" x2="1550" y1="1889.082" y2="1889.082"/><polygon fill="#A80036" points="1472.5,1879.082,1447.5,1889.082,1472.5,1899.082,1462.5,1889.082" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="402.5" x="1462.5" y="1844.4409">prepareSeSelection (reader)</text><polygon fill="#A80036" points="548.75,1954.9609,523.75,1964.9609,548.75,1974.9609,538.75,1964.9609" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="533.75" x2="1417.5" y1="1964.9609" y2="1964.9609"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="340" x="563.75" y="1952.8198">setSeSelectionRequest</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="491.25" x2="466.25" y1="2040.8398" y2="2030.8398"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="491.25" x2="466.25" y1="2040.8398" y2="2050.8398"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="126.25" x2="493.75" y1="2040.8398" y2="2040.8398"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="310" x="143.75" y="2028.6987">SE_MATCHED Event</text><polygon fill="#A80036" points="153.75,2106.7188,128.75,2116.7188,153.75,2126.7188,143.75,2116.7188" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="138.75" x2="493.75" y1="2116.7188" y2="2116.7188"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="168.75" y="2104.5776">C-APDU</text><polygon fill="#A80036" points="466.25,2182.5977,491.25,2192.5977,466.25,2202.5977,476.25,2192.5977" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="126.25" x2="481.25" y1="2192.5977" y2="2192.5977"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="143.75" y="2180.4565">R-APDU</text><polygon fill="#A80036" points="1390,2258.4766,1415,2268.4766,1390,2278.4766,1400,2268.4766" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="508.75" x2="1405" y1="2268.4766" y2="2268.4766"/><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="526.25" y="2256.3354">matchingSe</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4176.25" x="7.5" y="2341.416"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="2341.416" y2="2341.416"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="2348.916" y2="2348.916"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="1072.5" x="1559.375" y="2313.4766"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="1027.5" x="1574.375" y="2357.2144">Execute Remote Service for a specific Observable Native Reader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="1550" y1="2455.2344" y2="2455.2344"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1550" x2="1550" y1="2455.2344" y2="2487.7344"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1447.5" x2="1550" y1="2487.7344" y2="2487.7344"/><polygon fill="#A80036" points="1472.5,2477.7344,1447.5,2487.7344,1472.5,2497.7344,1462.5,2487.7344" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="342.5" x="1462.5" y="2443.0933">prepareUserInputData ()</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="1550" y1="2563.6133" y2="2563.6133"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1550" x2="1550" y1="2563.6133" y2="2596.1133"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1447.5" x2="1550" y1="2596.1133" y2="2596.1133"/><polygon fill="#A80036" points="1472.5,2586.1133,1447.5,2596.1133,1472.5,2606.1133,1462.5,2596.1133" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="425" x="1462.5" y="2551.4722">NativeClientUtils.getService ()</text><polygon fill="#A80036" points="2112.5,2866.3867,2137.5,2876.3867,2112.5,2886.3867,2122.5,2876.3867" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1445" x2="2127.5" y1="2876.3867" y2="2876.3867"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="352.5" x="1462.5" y="2659.8511">executeRemoteService (</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="385" x="1472.5" y="2700.73">RemoteServiceParameters</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="115" x="1492.5" y="2741.6089">.builder(</text><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="1607.5" y="2741.6089">serviceId</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="120" x="1750" y="2741.6089">, reader)</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="1492.5" y="2782.4878">.withInitialSeContent(</text><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="1797.5" y="2782.4878">matchingSe</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="10" x="1987.5" y="2782.4878">)</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="1492.5" y="2823.3667">.withUserInputData(</text><text fill="#008000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="1775" y="2823.3667">userInputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="117.5" x="1995" y="2823.3667">).build(),</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="352.5" x="1472.5" y="2864.2456">UserOutputDataFactory)</text><polygon fill="#A80036" points="2530,2901.3867,2555,2911.3867,2530,2921.3867,2540,2911.3867" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2167.5" x2="2545" y1="2911.3867" y2="2911.3867"/><polygon fill="#A80036" points="2767.5,2977.2656,2792.5,2987.2656,2767.5,2997.2656,2777.5,2987.2656" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2585" x2="2782.5" y1="2987.2656" y2="2987.2656"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="2602.5" y="2975.1245">create</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="622.5" x="2797.5" y="2931.3867"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="587.5" x="2815" y="2985.2197">RemoteServerObservableReader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3736.25" x2="3711.25" y1="3093.7891" y2="3083.7891"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3736.25" x2="3711.25" y1="3093.7891" y2="3103.7891"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2572.5" x2="3738.75" y1="3093.7891" y2="3093.7891"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="750" x="2590" y="3081.6479">notify (READER_CONNECTED, virtualReaderName)</text><polygon fill="#A80036" points="2612.5,3159.668,2587.5,3169.668,2612.5,3179.668,2602.5,3169.668" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2597.5" x2="3738.75" y1="3169.668" y2="3169.668"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="447.5" x="2627.5" y="3157.5269">getReader (virtualReaderName)</text><polygon fill="#A80036" points="3711.25,3235.5469,3736.25,3245.5469,3711.25,3255.5469,3721.25,3245.5469" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="2572.5" x2="3726.25" y1="3245.5469" y2="3245.5469"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="185" x="2590" y="3233.4058">virtualReader</text><polygon fill="#A80036" points="3148.75,3311.4258,3123.75,3321.4258,3148.75,3331.4258,3138.75,3321.4258" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3133.75" x2="3738.75" y1="3321.4258" y2="3321.4258"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="205" x="3163.75" y="3309.2847">getServiceId ()</text><polygon fill="#A80036" points="3711.25,3387.3047,3736.25,3397.3047,3711.25,3407.3047,3721.25,3397.3047" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3108.75" x2="3726.25" y1="3397.3047" y2="3397.3047"/><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="3126.25" y="3385.1636">serviceId</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3871.25" y1="3514.0625" y2="3514.0625"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3871.25" x2="3871.25" y1="3514.0625" y2="3546.5625"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3768.75" x2="3871.25" y1="3546.5625" y2="3546.5625"/><polygon fill="#A80036" points="3793.75,3536.5625,3768.75,3546.5625,3793.75,3556.5625,3783.75,3546.5625" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="3783.75" y="3461.0425">Find ticketing service</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="190" x="3783.75" y="3501.9214">to start using</text><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="3983.75" y="3501.9214">serviceId</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4176.25" x="7.5" y="3619.502"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="3619.502" y2="3619.502"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4183.75" y1="3627.002" y2="3627.002"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="452.5" x="1869.375" y="3591.5625"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="407.5" x="1884.375" y="3635.3003">Remote Ticketing Service</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3871.25" y1="3733.3203" y2="3733.3203"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3871.25" x2="3871.25" y1="3733.3203" y2="3765.8203"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3768.75" x2="3871.25" y1="3765.8203" y2="3765.8203"/><polygon fill="#A80036" points="3793.75,3755.8203,3768.75,3765.8203,3793.75,3775.8203,3783.75,3765.8203" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="325" x="3783.75" y="3721.1792">Start Ticketing Service</text><polygon fill="#A80036" points="3148.75,3831.6992,3123.75,3841.6992,3148.75,3851.6992,3138.75,3841.6992" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3133.75" x2="3738.75" y1="3841.6992" y2="3841.6992"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="302.5" x="3163.75" y="3829.5581">getInitialSeContent ()</text><polygon fill="#A80036" points="3711.25,3907.5781,3736.25,3917.5781,3711.25,3927.5781,3721.25,3917.5781" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3108.75" x2="3726.25" y1="3917.5781" y2="3917.5781"/><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="3126.25" y="3905.437">matchingSe</text><polygon fill="#A80036" points="3148.75,4024.3359,3123.75,4034.3359,3148.75,4044.3359,3138.75,4034.3359" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3133.75" x2="3738.75" y1="4034.3359" y2="4034.3359"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="250" x="3163.75" y="3981.3159">getUserInputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="335" x="3173.75" y="4022.1948">(UserInputDataFactory)</text><polygon fill="#A80036" points="3711.25,4100.2148,3736.25,4110.2148,3711.25,4120.2148,3721.25,4110.2148" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3108.75" x2="3726.25" y1="4110.2148" y2="4110.2148"/><text fill="#008000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="3126.25" y="4098.0737">userInputData</text><polygon fill="#A80036" points="3148.75,4176.0938,3123.75,4186.0938,3148.75,4196.0938,3138.75,4186.0938" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3133.75" x2="3738.75" y1="4186.0938" y2="4186.0938"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="262.5" x="3163.75" y="4173.9526">addObserver (this)</text><polygon fill="#A80036" points="3711.25,4211.0938,3736.25,4221.0938,3711.25,4231.0938,3721.25,4221.0938" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3108.75" x2="3726.25" y1="4221.0938" y2="4221.0938"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3871.25" y1="4296.9727" y2="4296.9727"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3871.25" x2="3871.25" y1="4296.9727" y2="4329.4727"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3768.75" x2="3871.25" y1="4329.4727" y2="4329.4727"/><polygon fill="#A80036" points="3793.75,4319.4727,3768.75,4329.4727,3793.75,4339.4727,3783.75,4329.4727" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="152.5" x="3783.75" y="4284.8315">continue...</text><path d="M45,4366.9727 L215,4366.9727 L215,4386.9727 L190,4411.9727 L32.5,4411.9727 L32.5,4379.4727 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.5;"/><rect fill="none" height="498.6523" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 5.0;" width="4055" x="32.5" y="4366.9727"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="70" y="4403.2104">loop</text><text fill="#000000" font-family="sans-serif" font-size="27.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="252.5" y="4400.52">[SE exchanges]</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3871.25" y1="4509.6094" y2="4509.6094"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3871.25" x2="3871.25" y1="4509.6094" y2="4542.1094"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3768.75" x2="3871.25" y1="4542.1094" y2="4542.1094"/><polygon fill="#A80036" points="3793.75,4532.1094,3768.75,4542.1094,3793.75,4552.1094,3783.75,4542.1094" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="267.5" x="3783.75" y="4456.5894">prepareSeRequest</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="205" x="3793.75" y="4497.4683">(virtualReader)</text><polygon fill="#A80036" points="3148.75,4607.9883,3123.75,4617.9883,3148.75,4627.9883,3138.75,4617.9883" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3133.75" x2="3738.75" y1="4617.9883" y2="4617.9883"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="3163.75" y="4605.8472">processSeRequest ()</text><polygon fill="#A80036" points="153.75,4683.8672,128.75,4693.8672,153.75,4703.8672,143.75,4693.8672" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="138.75" x2="3093.75" y1="4693.8672" y2="4693.8672"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="168.75" y="4681.7261">C-APDU</text><polygon fill="#A80036" points="3066.25,4759.7461,3091.25,4769.7461,3066.25,4779.7461,3076.25,4769.7461" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="126.25" x2="3081.25" y1="4769.7461" y2="4769.7461"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="143.75" y="4757.605">R-APDU</text><polygon fill="#A80036" points="3711.25,4835.625,3736.25,4845.625,3711.25,4855.625,3721.25,4845.625" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3108.75" x2="3726.25" y1="4845.625" y2="4845.625"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="132.5" x="3126.25" y="4833.4839">response</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3766.25" x2="3871.25" y1="4939.0039" y2="4939.0039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3871.25" x2="3871.25" y1="4939.0039" y2="4971.5039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3768.75" x2="3871.25" y1="4971.5039" y2="4971.5039"/><polygon fill="#A80036" points="3793.75,4961.5039,3768.75,4971.5039,3793.75,4981.5039,3783.75,4971.5039" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="370" x="3783.75" y="4926.8628">prepareUserOutputData ()</text><polygon fill="#A80036" points="2612.5,5037.3828,2587.5,5047.3828,2612.5,5057.3828,2602.5,5047.3828" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2597.5" x2="3738.75" y1="5047.3828" y2="5047.3828"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="540" x="2627.5" y="5035.2417">terminateService (virtualReaderName,</text><text fill="#800080" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="3177.5" y="5035.2417">userOutputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="10" x="3422.5" y="5035.2417">)</text><line style="stroke: #A80036; stroke-width: 5.0;" x1="3063.75" x2="3088.75" y1="5110.7617" y2="5135.7617"/><line style="stroke: #A80036; stroke-width: 5.0;" x1="3063.75" x2="3088.75" y1="5135.7617" y2="5110.7617"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2585" x2="3076.25" y1="5123.2617" y2="5123.2617"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="435" x="2602.5" y="5111.1206">remove virtual reader if needed</text><polygon fill="#A80036" points="2195,5148.2617,2170,5158.2617,2195,5168.2617,2185,5158.2617" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="2180" x2="2570" y1="5158.2617" y2="5158.2617"/><polygon fill="#A80036" points="1472.5,5224.1406,1447.5,5234.1406,1472.5,5244.1406,1462.5,5234.1406" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="1457.5" x2="2152.5" y1="5234.1406" y2="5234.1406"/><text fill="#800080" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="1487.5" y="5221.9995">userOutputData</text><!--MD5=[44959160278e5498a95265be057fbf97]
@startuml
title
    Keyple Remote Plugin
    RemoteServerPlugin API (16/06/2020)
    (with an ObservableReader)
end title


skinparam Shadowing false
skinparam RoundCorner 10



participant "Card" as se

box "Client APP using Native Lib" #FEF9E7
participant "**ObservableReader**" as reader #LightBlue
participant "**Plugin**" as plugin #LightBlue
actor "**Ticketing Service**" as client
participant "**NativeClientService**" as nativeService #LightBlue
end box

box "Server APP using Virtual Lib" #FDF2E9
participant "**RemoteServerPlugin**" as remotePlugin #LightBlue
participant "**RemoteServerObservableReader**" as virtualReader #LightBlue
actor "**Remote Ticketing Service**:\n**<back:LightBlue>ObservablePlugin.PluginObserver**" as server
end box

== Virtual Lib Initialization ==

activate server #Pink
server -> remotePlugin ** : seProxyService.registerPlugin\n (RemoteServerPluginFactory...\n    .withPluginObserver (this)...)
server -> server : Awaiting receipt of\n a Plugin Event...

== Native Lib Initialization ==

activate client #Pink
client -> nativeService ** : NativeClientServiceFactory...
client -> plugin ** : seProxyService.registerPlugin\n (new XXXFactory())
activate plugin #LightBlue
plugin -> reader ** : create
return

== Native SeSelection ==

client -> client : Start Ticketing Service
client -> plugin : getReader (name)
activate plugin #LightBlue
return reader
client -> client : prepareSeSelection (reader)
client -> reader : setSeSelectionRequest
activate reader #LightBlue

activate se #LightYellow
se ->> reader : SE_MATCHED Event
reader -> se : C-APDU
se - -> reader : R-APDU
return <color:red>**matchingSe**</color>

== Execute Remote Service for a specific Observable Native Reader ==

client -> client : prepareUserInputData ()

client -> client : NativeClientUtils.getService ()
client -> nativeService : executeRemoteService (\n RemoteServiceParameters\n   .builder(<color:blue>**serviceId**</color>, reader)\n   .withInitialSeContent(<color:red>**matchingSe**</color>)\n   .withUserInputData(<color:green>**userInputData**</color>).build(),\n UserOutputDataFactory)
activate nativeService #LightBlue

nativeService -> remotePlugin
activate remotePlugin #LightBlue
remotePlugin -> virtualReader ** : create
remotePlugin ->> server : notify (READER_CONNECTED, virtualReaderName)
deactivate remotePlugin

server -> remotePlugin : getReader (virtualReaderName)
activate remotePlugin #LightBlue
return virtualReader
server -> virtualReader : getServiceId ()
activate virtualReader #LightBlue
return <color:blue>**serviceId**</color>
server -> server : Find ticketing service\nto start using <color:blue>**serviceId**</color>

== Remote Ticketing Service ==

server -> server : Start Ticketing Service
server -> virtualReader : getInitialSeContent ()
activate virtualReader #LightBlue
return <color:red>**matchingSe**</color>
server -> virtualReader : getUserInputData\n (UserInputDataFactory)
activate virtualReader #LightBlue
return <color:green>**userInputData**</color>
server -> virtualReader : addObserver (this)
activate virtualReader #LightBlue
return
server -> server : continue...

loop #FDF2E9 SE exchanges
    server -> server : prepareSeRequest\n (virtualReader)
    server -> virtualReader : processSeRequest ()
    activate virtualReader #LightBlue
    virtualReader -> se : C-APDU
    se - -> virtualReader : R-APDU
    return response
end loop

server -> server : prepareUserOutputData ()
server -> remotePlugin : terminateService (virtualReaderName, <color:purple>**userOutputData**</color>)
activate remotePlugin #LightBlue
remotePlugin -x virtualReader : remove virtual reader if needed

remotePlugin - -> nativeService
deactivate remotePlugin
nativeService - -> client : <color:purple>**userOutputData**</color>
deactivate nativeService

@enduml

PlantUML version 1.2020.09(Sun May 10 12:51:06 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-b944.34
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>