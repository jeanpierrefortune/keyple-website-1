<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=description content="Packages & features The Keyple Calypso User API is an extension of the Keyple Core User API to manage Calypso Portable Object securely using Calypso SAM:
 The generic Secure Element selection is enhanced for the selection of a Calypso PO."><link rel=alternate hreflang=en-us href=/keyple-website/docs/architecture-keyplecalypso/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#1D87BB"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=%7CWork+Sans:ital,wght@0,300;1,500&display=swap"><link rel=stylesheet href=/keyple-website/css/academic.css><link rel=manifest href=/keyple-website/index.webmanifest><link rel=icon type=image/png href=/keyple-website/images/icon_hu7ad27d56423f7fa474c22a0369d3f2a8_310153_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/keyple-website/images/icon_hu7ad27d56423f7fa474c22a0369d3f2a8_310153_192x192_fill_lanczos_center_2.png><link rel=canonical href=/keyple-website/docs/architecture-keyplecalypso/><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@keyple_org"><meta property="twitter:creator" content="@keyple_org"><meta property="og:site_name" content="Eclipse Keyple"><meta property="og:url" content="/keyple-website/docs/architecture-keyplecalypso/"><meta property="og:title" content="Keyple Calypso – Architecture | Eclipse Keyple"><meta property="og:description" content="Packages & features The Keyple Calypso User API is an extension of the Keyple Core User API to manage Calypso Portable Object securely using Calypso SAM:
 The generic Secure Element selection is enhanced for the selection of a Calypso PO."><meta property="og:image" content="/keyple-website/images/logo_hud2fb0b35622057c5c7bb20829420fe80_179328_300x300_fit_lanczos_2.png"><meta property="twitter:image" content="/keyple-website/images/logo_hud2fb0b35622057c5c7bb20829420fe80_179328_300x300_fit_lanczos_2.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2020-02-24T00:00:00+01:00"><meta property="article:modified_time" content="2020-08-26T12:34:38+02:00"><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#1D87BB","text":"#FFFFFF"},"button":{"background":"#FFFFFF","text":"#1D87BB"}},"theme":"classic","type":"opt-in","content":{"header":'Cookiessss used on the website!',"message":"Some Eclipse Foundation pages use cookies to better serve you when you return to the site. You can set your browser to notify you before you receive a cookie or turn off cookies. If you do so, however, some areas of some sites may not function properly. To read Eclipse Foundation Privacy Policy ","allow":"Allow cookies","deny":"Decline","dismiss":"Got it!","link":"click here","href":'https://www.eclipse.org/legal/privacy.php'},})});</script><title>Keyple Calypso – Architecture | Eclipse Keyple</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><script>window.staDarkLightChooser=true;</script><script>const isSiteThemeDark=false;</script><script src=/keyple-website/js/load-theme.js></script><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/keyple-website/><img src=/keyple-website/images/logo_hud2fb0b35622057c5c7bb20829420fe80_179328_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/keyple-website/><img src=/keyple-website/images/logo_hud2fb0b35622057c5c7bb20829420fe80_179328_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/keyple-website/what-is-keyple/><span>What is Eclipse Keyple</span></a></li><li class=nav-item><a class=nav-link href=/keyple-website/what-is-keyple-page/><span>What is Eclipse Keyple 2</span></a></li><li class=nav-item><a class=nav-link href=/keyple-website/#news><span>News</span></a></li><li class=nav-item><a class="nav-link active" href=/keyple-website/docs/><span>Documentation</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Community</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/keyple-website/community/support-trainings/><span>Support and Trainings</span></a>
<a class=dropdown-item href=/keyple-website/community/contributing/><span>Contributing</span></a>
<a class=dropdown-item href=/keyple-website/community/faq/><span>FAQ</span></a></div></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Support & Trainings</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/keyple-website/community/support-trainings/cna/><span>Calypso Networks Association</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class="nav-link js-theme-selector" data-toggle=dropdown aria-haspopup=true><i class="fas fa-palette" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-3" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<span><i class="fas fa-bars"></i></span></button>
<input name=q type=search class=form-control placeholder=Search... autocomplete=off></form><nav class="collapse docs-links" id=docs-nav><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/>Architecture</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/architecture-keyplecore/>Keyple Core</a></li><li class=active><a href=/keyple-website/docs/architecture-keyplecalypso/>Keyple Calypso</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/build-your-first-app-java/>Build your first app</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/build-your-first-app-java/>Java</a></li><li><a href=/keyple-website/docs/build-your-first-app-android/>(WIP) Android</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/developer-guide-plugin/>Developer Guide</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/developer-guide-plugin/>(WIP)Develop a plugin</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#packages--features>Packages & features</a></li><li><a href=#calypso-selection>Calypso Selection</a></li><li><a href=#calypso-secure-transaction>Calypso secure transaction</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class=docs-article-container><h1>Keyple Calypso – Architecture</h1><div class=article-style><h2 id=packages--features>Packages & features</h2><p>The <strong>Keyple Calypso User API is an extension of the Keyple Core User API</strong> to manage Calypso Portable Object securely using Calypso SAM:</p><ul><li>The generic Secure Element selection is enhanced for the <strong>selection of a Calypso PO</strong>. The FCI response is automatically analyzed in order to identify the revision and the features supported by the Calypso PO. The invalidation status is also checked.</li><li>The selected Calypso PO object allows to automatically initialize a <strong>Calypso PO transaction</strong>: high level functional commands could be prepared and processed in order to <strong>read or write data in the PO file structure</strong>, outside or securely inside a <strong>Calypso secure session</strong>.</li></ul><table><tr><td colspan=2><b>Features</b></td><td><b>Packages</b></td></tr><tr><td rowspan=2 width=15%>Calypso PO operations</td><td width=50%>Selection of Calypso SE: PO or SAM
PO transaction:<li>Read / update of data</li><li>PO authentication</li></td><td width=35%>org.eclipse.keyple.calypso.<b>transaction<b></td></tr><tr><td>Calypso PO responses data parsing</td><td>org.eclipse.keyple.calypso.<b>command.po.parser<b></td></tr></table><h2 id=calypso-selection>Calypso Selection</h2><p>The Calypso API to select a Portable object is an extension of the generic Secure Element selection Core API:</p><ul><li>A PO AID selection could be defined to <strong>accept or reject invalidated PO</strong>.</li><li>A request for a SE selection is defined with SE selector containing at least an AID (to operate through a Select Application APDU command) or an ATR filter. A request for a PO selection could be enhanced to operate after the PO selector processing some APDU commands with the PO : <strong>Select File or Read Records commands</strong>.</li><li>In case of successful Calypso PO, the matching SE is retuned as a Calypso PO. The Calypso API analyzes the startup information of a Calypso PO in order to identify the kind of product, its revision, the optional features supported, the file structure used. Then for coming PO commands, the setting of the technical parameters automatically managed.</li></ul><p>The PO command grouped with the PO selection have to be “prepared” before the processing of a default or explicit SE selection.</p><blockquote><p>cf.
<a href=https://github.com/eclipse/keyple-java/blob/develop/java/example/calypso/pc/UseCase1_ExplicitSelectionAid/src/main/java/org/eclipse/keyple/example/calypso/pc/usecase1/ExplicitSelectionAid_Pcsc.java target=_blank rel=noopener>“Calypso Use Case 1 / Explicit AID Selection”</a> example<br>cf.
<a href=https://github.com/eclipse/keyple-java/blob/develop/java/example/calypso/pc/UseCase2_DefaultSelectionNotification/src/main/java/org/eclipse/keyple/example/calypso/pc/usecase2/DefaultSelectionNotification_Pcsc.java target=_blank rel=noopener>“Calypso Use Case 2 / Default Selection Notification”</a> example</p></blockquote><p><img src=../../img/KeypleCalypso-1-Transaction-PO_Selection.png alt="Calypso - PO Selection scheme" title="Calypso - PO Selection">
A ‘PO resource’ is the set of a Calypso PO and the reader on which it is selected.</p><p>In a same way the Calypso APO provides the tool to select a Calypso security module (a SAM). A SAM selector doesn’t support AID. The corresponding matching SE is a Calypso SAM. A Calypso SAM and the reader used for its selection defines a ‘SAM resource’.</p><h2 id=calypso-secure-transaction>Calypso secure transaction</h2><p>A PO transaction could be operated on a Calypso resource. In case a SAM resource is set, a PO transaction could support the Calypso secure session in order to manage a mutual authentication between the terminal and the Calypso PO.</p><p>Through the PO transaction API, only the APDU commands for the PO are explicitly defined; the APDU commands for the SAM are automatically built by the library. Two kinds of methods are provided by the API: ‘<strong>prepare</strong>’ methods, and ‘<strong>process</strong>’ methods.</p><ul><li>The ‘prepare’ methods allows to define PO file selection and PO data access operations (read or update of records for a specific file, append of record for a cyclic file, increase or decrease of the value of a counter).</li><li>A ‘process” method sends to the PO at least the previously prepared command.<ul><li>The process PO commands method could operated only if no secure session is currently open with the PO. If one or several PO commands have been prepared, a single request is done to the PO reader.</li><li>The process opening method allows to manage the opening of a secure session.<ul><li>First a single request is operated to the SAM reader in order to set the PO serial as the cryptographic diversifier, and to get the terminal challenge for the session.</li><li>Then another single request is done to the PO reader to play the prepared PO command, and to manage the opening of the PO session.</li></ul></li><li>A process PO command in session method could be processed only if a secure session is already open with PO.<ul><li>A single request Is operated with the PO reader to operate the prepared PO commands.</li><li>Another single request is sent to the SAM reader to update the update the digest of the MAC session.</li></ul></li><li>The process closing method is used to manage the closing of the secure session with the PO.<ul><li>A first SAM request is operated to update the digest of the last prepared PO commands and to get the terminal session certificate (to save a PO request, the API anticipates the responses of the prepared PO commands).</li><li>A single PO request is transmitted to run the last prepared PO command, to recover the PO session certificate, and to send the ratification signal if necessary.</li><li>Finally, a second SAM request allows to authenticate the PO. If the transaction is successful the mutual authentication is valid, and the PO has atomically committed the requested data updates.</li></ul></li></ul></li></ul><p>The minimal costs of a Calypso secure session are:</p><ul><li>3 PO requests (1 for the PO selection + 1 for the PO session opening + 1 for the PO session closing).</li><li>And 3 SAM requests if the SAM is already selected (1 for the PO session opening + 2 for the PO session closing); otherwise 4 SAM requests if the SAM isn’t already selected.</li></ul><p><img src=../../img/KeypleCalypso-2-Transaction-PO_Session.png alt="Calypso - PO Transaction scheme" title="Calypso - PO Transaction"></p><p>By default, the PO transaction manages the Calypso secure session as ‘atomic’: the cumulative amount of PO updates command can’t exceed the size of the PO session buffer.</p><blockquote><p>cf.
<a href=https://github.com/eclipse/keyple-java/blob/develop/java/example/calypso/pc/UseCase4_PoAuthentication/src/main/java/org/eclipse/keyple/example/calypso/pc/usecase4/PoAuthentication_Pcsc.java target=_blank rel=noopener>“Calypso Use Case 4 / PO Authentication”</a> example</p></blockquote><p>The PO transaction could also be defined to allow multiple sessions: in this case the transaction is automatically split in several session as necessary.</p><blockquote><p>cf.
<a href=https://github.com/eclipse/keyple-java/blob/develop/java/example/calypso/pc/UseCase5_MultipleSession/src/main/java/org/eclipse/keyple/example/calypso/pc/usecase5/MultipleSession_Pcsc.java target=_blank rel=noopener>“Calypso Use Case 5 / PO Multiple Session&rdquo;</a> example</p></blockquote></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=/keyple-website/docs/developer-guide-plugin/ rel=next>(WIP)Developer guide - Develop a Plugin</a></div></div></div></div><div class=body-footer><p>Last updated on Wed, Aug 26, 2020</p><p class=edit-page><a href=https://github.com/calypsonet/keyple-website/edit/master/content/docs/architecture-keyplecalypso.md><i class="fas fa-pen pr-2"></i>Edit this page</a></p></div></article><style type=text/css media=screen>footer{background-color:#1d87bb}footer a{color:#fff}footer ul{padding-left:0}footer li{line-height:1.42857143;position:relative;display:block;color:#fff}</style><footer class=site-footer><div class=container><div class="row featurette"><div class="col-12 col-sm-4"><h4>More</h4><ul><li><a href=https://github.com/eclipse/keyple title="View Source Code on GitHub"><i class="fab fa-github"></i>GitHub Repository</a></li><li><a href=https://twitter.com/keyple_org title="Follow us on Twitter"><i class="fab fa-twitter"></i>Twitter</a></li><li><a href=https://accounts.eclipse.org/mailing-list/keyple-user title="Keyple progress information and user discussions"><i class="fas fa-envelope"></i>User mailing list</a></li><li><a href=https://accounts.eclipse.org/mailing-list/keyple-dev title="Keyple developer discussions"><i class="fas fa-envelope"></i>Developer mailing list</a></li></ul></div><div class="col-12 col-sm-4"><h4>Eclipse Foundation</h4><ul><li><a href=https://www.eclipse.org/org/>About Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/org/foundation/contact.php>Contact Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/donate>Donate</a></li><li><a href=https://www.eclipse.org/membership>Members</a></li><li><a href=https://www.eclipse.org/org/documents/>Governance</a></li><li><a href=https://www.eclipse.org/org/documents/Community_Code_of_Conduct.php>Code of Conduct</a></li><li><a href=https://www.eclipse.org/artwork/>Logo and Artwork</a></li><li><a href=https://www.eclipse.org/org/foundation/directors.php></a></li></ul></div><div class="col-12 col-sm-4"><h4>Legal</h4><ul><li><a href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://www.eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=https://www.eclipse.org/legal/epl-2.0/>Eclipse Public License</a></li><li><a href=https://www.eclipse.org/legal/>Legal Resources</a></li><li><a href=https://eclipse.org/security/ target=_blank>Report a Vulnerability</a></li></ul></section></div></div><p class=powered-by>Copyright © Eclipse Foundation, Inc. All Rights Reserved.</p><p class=powered-by>Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.</p></footer></main></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/r.min.js></script><script>const code_highlighting=true;</script><script>const search_config={"indexURI":"/keyple-website/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks",'slides':"Slides"};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin=anonymous></script><script>anchors.add();</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/keyple-website/js/academic.min.3b2b658c61ebd725bd5fc606c89fe44c.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>